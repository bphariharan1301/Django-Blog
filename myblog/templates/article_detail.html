{% extends 'base.html' %}

{% block title %} 
    {{ post.title }} 
{% endblock %}

{% block content %}

<style>
    .btn:hover{
        background-color: #00b3db;
        color: #fff;
    }
</style>

<h1> {{ post.title }} </h1>
<small>
    By: {{ post.author.first_name }} 
    {{ post.author.last_name }} - 
    {{post.published_date}}
    {% if user.is_authenticated %}
    - <a href="{% url 'update_post' post.pk %}">(Edit)</a>
    - <a href="{% url 'update_post' post.pk %}">(Delete)</a>
    {% endif %}
</small>

<hr><br>
<p>
    {{post.body|safe}}
</p>

<a href="{% url 'home' %}" class="btn btn-secondary">Back</a>

<br>
<br>
<hr>

<form action="{% url 'like_post' post.pk %}" method="POST">
    {% csrf_token %}
    {% if user.is_authenticated %}
        {% if liked %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-primary btn-sm">
                Unlike
            </button> 
        {% else %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-primary btn-sm">
                Like
            </button> 
        {% endif %}
        - {{ total_likes }}
    {% endif %}
    
</form>

{% endblock %}